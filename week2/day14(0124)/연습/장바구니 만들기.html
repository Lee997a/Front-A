<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    .wrap {
      border: 1px solid black;
      width: 600px;
      height: 200px;
    }

    table {
      text-align: center;
      border-collapse: collapse;
    }

    table th,
    td {
      border: 1px solid black;

    }

    table td {
      width: 90px;
    }

    input {
      border: none;
      outline: none;
    }
  </style>

  <script>
    //1. 수량
    function number(obj) {
      const qty = parseInt(obj.value);

      //2. 가격 가져오기

      const tr = obj.parentElement.parentElement;
      const price = parseInt(tr.querySelector(".price").innerHTML); //ex. 2500

      //3. 금액 구하기

      const amt = qty * price;

      //4. 금액 넣기

      tr.querySelector(".amt").innerHTML = amt;

      totalprice() //총 합계 금액
    }

    function totalprice() {
      //1. amt 모두 가져오기

      const amts = document.querySelectorAll(".amt");

      //2. 금액 더하기 (반복)
      let sum = 0;

      for (let i = 0; i < amts.length; i++) {
        //배열 꺼내오기
        let item = amts[i];

        //배열 안에 있는 숫자 가져오기
        let price = parseInt(item.innerHTML);
        sum += price;
      }
      //전체 금액 태그 선택하기
      const total = document.getElementById("total-price");

      //선택한 태그 안에 금액 넣기
      total.innerHTML = sum;
    }

    function deleteItem(){
      //1. 체크박스 가져오기
      const items = document.querySelectorAll(".check_b");

      for(let i = 0; i < items.length; i++){
        const item = items[i];

        if(item.checked){
          const td = item.parentElement; //td
          const qty = td.nextElementSibling.nextElementSibling.nextElementSibling;

          qty.remove();
        }
      }

    }




  </script>
</head>

<body>
  <div class="wrap">
    <table>
      <caption>장바구니</caption>
      <thead>
        <tr>
          <th>체크</th>
          <th>상품명</th>
          <th>가격</th>
          <th>수량</th>
          <th>금액</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><input type="checkbox" class="check_b"></td>
          <td>사과</td>
          <td class="price">2500</td>
          <td><input type="text" value="" onkeyup="number(this)" class="qty"></td>
          <td class="amt">0</td>
        </tr>
        <tr>
          <td><input type="checkbox" class="check_b"></td>x
          <td>배</td>
          <td class="price">3500</td>
          <td><input type="text" value="" onkeyup="number(this)" class="qty"></td>
          <td class="amt">0</td>
        </tr>
        <tr>
          <td><input type="checkbox" class="check_b"></td>
          <td>포도</td>
          <td class="price">2000</td>
          <td><input type="text" value="" onkeyup="number(this)" class="qty"></td>
          <td class="amt">0</td>
        </tr>
        <tr>
          <td><input type="checkbox" class="check_b"></td>
          <td>참외</td>
          <td class="price">3000</td>
          <td><input type="text" value="" onkeyup="number(this)" class="qty"></td>
          <td class="amt">0</td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td>총 금액</td>
          <td colspan="4" id="total-price">0</td>
        </tr>
      </tfoot>

    </table>

    <button onclick="deleteItem()">삭제</button>
  </div>
</body>

</html>